name = "fulfillment-worker"
main = "fulfillmentworker/index.js"
compatibility_date = "2024-09-23"
node_compat = true
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "fulfillment_db"
database_name = "fulfillment-db"
database_id = "4708b2cc-fa58-4015-ad8e-7b689f652b79"

[[kv_namespaces]]
binding = "SHIPPING_CACHE"
id = "b59ed95bf2a74531b38c7ae95fea67a8"  # Replace with actual KV namespace ID after creation

[[services]]
binding = "auth_worker"
service = "auth-worker"

[[services]]
binding = "log_worker"
service = "log-worker"

[secrets]
# Honeycomb API key - set via: wrangler secret put HONEYCOMB_API_KEY --config wrangler.fulfillmentworker.toml
# HONEYCOMB_API_KEY
# Optional: HONEYCOMB_ENDPOINT (default: https://api.honeycomb.io/v1/traces)
# Optional: HONEYCOMB_DATASET (default: fulfillment-worker)
# Optional: SERVICE_VERSION (default: 1.0.0)

[vars]
FULFILLMENT_WORKER_URL = "https://fulfillment-worker.shyaamdps.workers.dev"
LOG_WORKER_URL = "https://log-worker.shyaamdps.workers.dev"
AUTH_WORKER_URL = "https://auth-worker.shyaamdps.workers.dev"
INTER_WORKER_API_KEY = "ECOMSECRET"

